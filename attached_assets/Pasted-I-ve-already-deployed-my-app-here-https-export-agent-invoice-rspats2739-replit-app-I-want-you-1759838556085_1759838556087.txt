Iâ€™ve already deployed my app here:
ğŸŒ https://export-agent-invoice-rspats2739.replit.app

I want you to completely fix and finalize this app so it becomes a fully working professional SaaS AI platform for exporters, with these exact requirements:

ğŸ”§ 1. Backend Fixes

Replace the existing server.js with a clean Express backend that:

Connects properly to Supabase (for users, invoices, forms).

Integrates Stripe Checkout and Billing Portal for payments and subscriptions.

Fixes â€œFailed to load statsâ€ on the Dashboard by fetching user data from Supabase.

Provides working API endpoints:

GET /api/user-stats â†’ return number of invoices, forms, and plan.

POST /api/checkout â†’ create Stripe checkout session.

POST /api/manage-billing â†’ open Stripe billing portal.

POST /api/webhook â†’ handle checkout.session.completed events.

Includes /health endpoint and serves the React frontend from dist.

Use correct live domain: https://export-agent-invoice-rspats2739.replit.app

No localhost anywhere.

Port should be process.env.PORT || 5000.

ğŸ’³ 2. Stripe Integration

Use these keys from Secrets:

STRIPE_SECRET_KEY
STRIPE_WEBHOOK_SECRET
VITE_STRIPE_PUBLISHABLE_KEY


Set up working checkout session for:

Pro Plan (Â£9.99/month)

With test card 4242 4242 4242 4242 for Stripe test mode.

Set up â€œManage Billingâ€ to open Stripe Billing Portal.

Test the full flow:

Click â€œUpgrade to Proâ€ â†’ redirect to checkout â†’ return to success page.

â€œManage Billingâ€ â†’ open Stripe customer portal.

Add success and cancel pages with friendly messages.

Ensure webhook route works correctly.

ğŸ‘¤ 3. Authentication (Supabase)

Enable Google OAuth login and standard email/password.

When a user logs in, save their basic info (name, email, join date).

Show logged-in user details in Profile & Billing.

Display current plan (Free or Pro) based on Stripe subscription status.

Ensure OAuth works live (fix redirect_uri_mismatch).
Add redirect:
https://export-agent-invoice-rspats2739.replit.app/**

ğŸ“Š 4. Dashboard

â€œFailed to load statsâ€ must be fixed â€” display real Supabase data:

Invoices generated count

Forms completed count

Current plan

If no data, default to 0.

ğŸ’¼ 5. Frontend Fixes

Ensure all buttons actually call backend routes:

â€œUpgrade to Proâ€ â†’ /api/checkout

â€œManage Billingâ€ â†’ /api/manage-billing

Add success and cancel routes for Stripe.

Fix Profile page so â€œUpgrade to Proâ€ and â€œManage Billingâ€ are clickable and functional.

Remove demo placeholders (e.g., demo@exportai.com
) and connect to Supabase user info.

ğŸ—ƒï¸ 6. Environment Variables

Please verify these are correctly used in Replit Secrets:

SUPABASE_URL
SUPABASE_KEY
STRIPE_SECRET_KEY
STRIPE_WEBHOOK_SECRET
VITE_STRIPE_PUBLISHABLE_KEY

ğŸŒ 7. Testing

After you finish:

Visit the live app and confirm all of these work:
âœ… Login via Google or email
âœ… Dashboard shows stats
âœ… Invoice Generator works
âœ… â€œUpgrade to Proâ€ redirects to Stripe checkout
âœ… â€œManage Billingâ€ opens Stripe portal
âœ… Webhook logs Stripe events in console
âœ… Profile shows real user info and plan

ğŸ§¾ 8. Bonus polish

Add simple success and cancel pages:

/success â†’ â€œğŸ‰ Payment successful! You are now Pro.â€

/cancel â†’ â€œâŒ Payment cancelled. Try again later.â€

Improve Profile & Billing layout: show plan, email, join date, and â€œUpgrade to Proâ€ button nicely styled.

Add health route for uptime check.

Please rebuild and restart the project after applying all fixes, test everything, and confirm that:

All API routes respond correctly.

Stripe checkout and billing work live.

Supabase auth and stats are functional.

App is 100% working on the Replit live domain.

Once complete, provide a short summary of what was fixed and tested âœ…